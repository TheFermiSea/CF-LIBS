{"id":"CF-LIBS-013","title":"Implement Voigt line profile","description":"Only Gaussian profiles implemented. Voigt profile (convolution of Gaussian + Lorentzian) required for accurate line shapes at high pressures/densities.","design":"1. Lorentzian profile implementation\\n2. Voigt via JAX-compatible rational approximation (Humlicek or Hui-Armstrong-Kolk)\\n3. Avoid scipy.special.wofz for JAX compatibility\\n4. Unit tests against analytical limits","acceptance_criteria":"- [ ] Lorentzian profile normalized correctly\\n- [ ] Voigt profile accurate to 1e-4 vs scipy.special.wofz\\n- [ ] JAX-compatible (works in jit-compiled functions)\\n- [ ] Performance acceptable (\u003c10x slower than Gaussian)","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T14:29:04.896822-06:00","updated_at":"2025-12-06T15:03:43.661764-06:00","closed_at":"2025-12-06T15:03:43.661764-06:00","dependencies":[{"issue_id":"CF-LIBS-013","depends_on_id":"CF-LIBS-i0q","type":"parent-child","created_at":"2025-12-06T14:31:20.817777-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-013","depends_on_id":"CF-LIBS-1mb","type":"blocks","created_at":"2025-12-06T14:31:33.678612-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-0oq","title":"Implement MCMC sampling with NumPyro","description":"JAX-based MCMC sampler (NumPyro or numpyro) for GPU-accelerated posterior sampling. Include convergence diagnostics (R-hat, ESS).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T07:33:46.179124-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:03:58.876316-06:00","closed_at":"2026-01-09T11:03:58.876316-06:00","close_reason":"COMPLETE: MCMCSampler class, MCMCResult dataclass with convergence diagnostics (R-hat, ESS), credible intervals, ArviZ integration. Voigt gradient stability issue FIXED via Weideman approximation (CF-LIBS-452). All 25 bayesian tests pass including MCMC smoke test.","dependencies":[{"issue_id":"CF-LIBS-0oq","depends_on_id":"CF-LIBS-cxp","type":"blocks","created_at":"2026-01-09T07:34:08.196305-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-0oq","depends_on_id":"CF-LIBS-zbs","type":"blocks","created_at":"2026-01-09T07:34:08.239809-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-0pb","title":"Implement error propagation for CF-LIBS","description":"Uncertainties in atomic data (A_ki 10-50%) and measurements propagate to T, ne, concentrations. Users need realistic error bars.","design":"1. Analytical: Covariance matrix from linear regression -\u003e σ_T\\n2. Monte Carlo: Perturb inputs (I±σ_I, A_ki±σ_A), re-run solver 100x\\n3. Report: T±σ_T, ne±σ_ne, C±σ_C for each element\\n4. Correlation matrix between parameters","acceptance_criteria":"- [ ] Analytical errors match Monte Carlo for simple cases\\n- [ ] Monte Carlo captures non-linear effects\\n- [ ] Error bars reported in standard output\\n- [ ] Correlation information available","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T14:30:16.42627-06:00","updated_at":"2026-01-09T11:37:16.85258-06:00","closed_at":"2026-01-09T11:37:16.85258-06:00","close_reason":"Superseded by Bayesian MCMC (CF-LIBS-0oq, CF-LIBS-k7g): Full uncertainty via posterior sampling with credible intervals (T±σ, n_e±σ, C±σ), correlation_matrix(), and ArviZ visualization. Monte Carlo via NUTS is more rigorous than perturbation approach.","dependencies":[{"issue_id":"CF-LIBS-0pb","depends_on_id":"CF-LIBS-4xu","type":"parent-child","created_at":"2025-12-06T14:31:23.152568-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-0xd","title":"Implement PCA Pipeline (JAX)","description":"Principal Component Analysis using JAX SVD for high-performance dimensionality reduction.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T08:25:02.559153-06:00","created_by":"briansquires","updated_at":"2026-01-07T08:25:02.559153-06:00"}
{"id":"CF-LIBS-1ie","title":"Multivariate Analysis \u0026 Machine Learning","description":"Implement PCA, PLS, and clustering pipelines, leveraging JAX for acceleration.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-07T08:23:50.112651-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:36:18.679719-06:00","closed_at":"2026-01-09T14:36:18.679719-06:00","close_reason":"Restructuring: ML tasks moved to Implementation Backlog. Epic tracking replaced by ROADMAP.","dependencies":[{"issue_id":"CF-LIBS-1ie","depends_on_id":"CF-LIBS-0xd","type":"blocks","created_at":"2026-01-07T08:28:01.263808-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-1ie","depends_on_id":"CF-LIBS-r89","type":"blocks","created_at":"2026-01-07T08:28:06.3264-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-1mb","title":"Repair manifold generator physics","description":"Current manifold uses invalid physics: hard-coded partition functions (U_Z0=25, U_Z1=15), no Stark broadening, simplified Doppler. Manifolds produced are scientifically invalid.","design":"1. Replace hard-coded partition functions with polynomial evaluator\\n2. Add Stark broadening to line profiles\\n3. Fix Doppler width calculation (use proper mass-dependent formula)\\n4. Re-validate against forward model","acceptance_criteria":"- [ ] Partition functions from database, not constants\\n- [ ] Stark width included in profiles\\n- [ ] Doppler uses correct formula\\n- [ ] Manifold spectra match SpectrumModel output","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T14:30:18.575342-06:00","updated_at":"2026-01-09T05:47:53.754559-06:00","closed_at":"2026-01-09T05:47:53.754559-06:00","close_reason":"Manifold generator physics repaired: Voigt profiles with Stark broadening, proper Doppler width with mass dependence, Humlicek W4 Faddeeva approximation","dependencies":[{"issue_id":"CF-LIBS-1mb","depends_on_id":"CF-LIBS-cxm","type":"parent-child","created_at":"2025-12-06T14:31:23.188962-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-1mb.1","title":"[Phase 1] Load Stark parameters and atomic masses","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T05:37:44.068443-06:00","created_by":"briansquires","updated_at":"2026-01-09T05:47:45.62269-06:00","closed_at":"2026-01-09T05:47:45.62269-06:00","close_reason":"Phase 2d manifold physics repair completed: Voigt+Stark profiles, JAX physics functions, configuration options, 14 physics tests passing","labels":["parallel","subagent:code"],"dependencies":[{"issue_id":"CF-LIBS-1mb.1","depends_on_id":"CF-LIBS-1mb","type":"parent-child","created_at":"2026-01-09T05:37:44.069467-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-1mb.2","title":"[Phase 2] Add JAX physics functions (doppler_sigma_jax)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T05:37:44.129651-06:00","created_by":"briansquires","updated_at":"2026-01-09T05:47:45.625418-06:00","closed_at":"2026-01-09T05:47:45.625418-06:00","close_reason":"Phase 2d manifold physics repair completed: Voigt+Stark profiles, JAX physics functions, configuration options, 14 physics tests passing","labels":["parallel","subagent:code"],"dependencies":[{"issue_id":"CF-LIBS-1mb.2","depends_on_id":"CF-LIBS-1mb","type":"parent-child","created_at":"2026-01-09T05:37:44.130285-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-1mb.3","title":"[Phase 3] Modify generator core for Voigt+Stark","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T05:37:44.192489-06:00","created_by":"briansquires","updated_at":"2026-01-09T05:47:45.627403-06:00","closed_at":"2026-01-09T05:47:45.627403-06:00","close_reason":"Phase 2d manifold physics repair completed: Voigt+Stark profiles, JAX physics functions, configuration options, 14 physics tests passing","dependencies":[{"issue_id":"CF-LIBS-1mb.3","depends_on_id":"CF-LIBS-1mb","type":"parent-child","created_at":"2026-01-09T05:37:44.193128-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-1mb.3","depends_on_id":"CF-LIBS-1mb.1","type":"blocks","created_at":"2026-01-09T05:37:51.953991-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-1mb.3","depends_on_id":"CF-LIBS-1mb.2","type":"blocks","created_at":"2026-01-09T05:37:52.000879-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-1mb.4","title":"[Phase 4] Add ManifoldConfig options and HDF5 versioning","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T05:37:44.254689-06:00","created_by":"briansquires","updated_at":"2026-01-09T05:47:45.629326-06:00","closed_at":"2026-01-09T05:47:45.629326-06:00","close_reason":"Phase 2d manifold physics repair completed: Voigt+Stark profiles, JAX physics functions, configuration options, 14 physics tests passing","dependencies":[{"issue_id":"CF-LIBS-1mb.4","depends_on_id":"CF-LIBS-1mb","type":"parent-child","created_at":"2026-01-09T05:37:44.25534-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-1mb.4","depends_on_id":"CF-LIBS-1mb.3","type":"blocks","created_at":"2026-01-09T05:37:52.096275-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-1mb.5","title":"[Phase 5] Create physics and round-trip tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T05:37:44.321333-06:00","created_by":"briansquires","updated_at":"2026-01-09T05:47:45.631318-06:00","closed_at":"2026-01-09T05:47:45.631318-06:00","close_reason":"Phase 2d manifold physics repair completed: Voigt+Stark profiles, JAX physics functions, configuration options, 14 physics tests passing","labels":["subagent:code"],"dependencies":[{"issue_id":"CF-LIBS-1mb.5","depends_on_id":"CF-LIBS-1mb","type":"parent-child","created_at":"2026-01-09T05:37:44.322026-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-1mb.5","depends_on_id":"CF-LIBS-1mb.2","type":"blocks","created_at":"2026-01-09T05:37:52.141601-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-1tx","title":"CF-LIBS v1.0 Production Release","description":"# CF-LIBS v1.0 Production Release\n\nMaster epic consolidating all remaining work for a production-ready CF-LIBS release.\n\n## Based on NotebookLM Analysis\n\n### Validated Strengths (Complete)\n- ✓ Classic CF-LIBS algorithm (Ciucci et al. methodology)\n- ✓ Saha-Boltzmann equilibrium with Irwin partition functions\n- ✓ Voigt profiles (Humlicek W4 + Weideman JAX)\n- ✓ Bayesian UQ with NumPyro MCMC and dynesty nested sampling\n- ✓ Hybrid inversion (manifold + L-BFGS)\n- ✓ JAX acceleration for GPU computing\n\n### Identified Gaps (This Epic)\n1. **Self-Absorption Complexity**: Current recursive correction may not capture full optically thick plasma complexity (COG/CD-SB methods needed)\n2. **Ecosystem Integration**: Jupyter visualization, hardware drivers, export tools\n3. **Matrix Effect Correction**: Beyond standard CF-LIBS assumptions\n4. **Error Propagation**: Monte Carlo uncertainty for complex samples\n\n## Sub-Epics\n1. **Phase 4a**: Implementation Backlog (P1-P2 ready tasks)\n2. **Phase 4b**: Ecosystem \u0026 Integration (visualization, drivers, export)\n3. **Phase 4c**: Physics Refinements (self-absorption, matrix effects)\n4. **Phase 4d**: Research Roadmap (P3-P4 future work)\n\n## Success Criteria\n- All P1/P2 tasks complete with tests\n- Comprehensive documentation and examples\n- Production-quality error handling\n- Published API reference\n- Integration tests with real LIBS data","status":"open","priority":1,"issue_type":"epic","owner":"squires.b@gmail.com","created_at":"2026-01-16T13:54:25.98067-06:00","created_by":"TheFermiSea","updated_at":"2026-01-16T13:54:25.98067-06:00"}
{"id":"CF-LIBS-2b4","title":"Ralph: Refactor test suite to production standards","notes":"Iteration 3: Fixed file descriptor leaks in tempfile.mkstemp() calls across 9 test files. Added seed parameter to create_synthetic_lines() for deterministic test behavior. Eliminated flaky test_huber_convergence failure. All 442 tests pass consistently.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-10T08:59:48.316437-06:00","created_by":"briansquires","updated_at":"2026-01-10T09:44:38.53042-06:00","closed_at":"2026-01-10T09:44:38.53042-06:00","close_reason":"Completed: Fixed 4 test failures (float32 precision), added test markers (requires_jax, requires_bayesian, requires_uncertainty), fixed file descriptor leaks in 8 files, added deterministic seeds to create_synthetic_lines(), added missing docstring to test_partition.py. All 442 tests pass."}
{"id":"CF-LIBS-36l","title":"Phase 4b: Ecosystem \u0026 Integration","description":"# Phase 4b: Ecosystem \u0026 Integration\n\nUser-facing tools and integrations for production deployment.\n\n## NotebookLM Analysis Finding\n\u003e \"Phase 4 of the roadmap is marked as 'Future,' indicating a current lack of visualization tools (Jupyter-friendly outputs), hardware driver integrations (VISA, PyMoDAQ), and export tools for common formats.\"\n\n## Scope\n\n### Visualization (P2)\n- Jupyter-friendly spectrum plotting\n- Interactive Boltzmann plot visualization\n- Posterior distribution plots (corner plots, trace plots)\n- Quality metrics dashboard\n\n### Hardware Integration (P3)\n- VISA driver abstraction layer\n- PyMoDAQ integration\n- Spectrometer calibration tools\n- Real-time acquisition interface\n\n### Export \u0026 Interoperability (P2)\n- Export to common formats (CSV, HDF5, JCAMP-DX)\n- Import from commercial LIBS software\n- Report generation (PDF, HTML)\n- Integration with spectral databases\n\n### Documentation \u0026 Examples (P2)\n- Jupyter notebook tutorials\n- API reference documentation\n- Workflow examples for common use cases\n- Best practices guide\n\n## Success Criteria\n- Jupyter widgets for interactive analysis\n- At least one hardware driver working\n- Export/import for 3+ formats\n- 5+ tutorial notebooks","status":"open","priority":2,"issue_type":"epic","owner":"squires.b@gmail.com","created_at":"2026-01-16T13:54:38.292445-06:00","created_by":"TheFermiSea","updated_at":"2026-01-16T13:54:38.292445-06:00"}
{"id":"CF-LIBS-37w","title":"[Doc] Update CLAUDE.md and ROADMAP.md","notes":"Update project status: Phase 2c testing complete. Mark relevant items in ROADMAP.md as done. Update CLAUDE.md if needed. Final task before closing epic.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-08T22:30:36.921572-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:38.557195-06:00","closed_at":"2026-01-08T23:08:38.557195-06:00","close_reason":"Phase 2c validation testing complete - 95 tests, 88% average coverage","dependencies":[{"issue_id":"CF-LIBS-37w","depends_on_id":"CF-LIBS-6o9","type":"blocks","created_at":"2026-01-08T22:31:18.448293-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-37w","depends_on_id":"CF-LIBS-xmb","type":"parent-child","created_at":"2026-01-08T22:31:49.89102-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-452","title":"Rewrite Voigt Profile for JAX Gradient Stability","description":"## Problem Statement\n\nThe Humlicek W4 Faddeeva approximation in `cflibs/radiation/profiles.py` produces NaN gradients during JAX autodiff at certain parameter combinations, blocking MCMC sampling for multi-line models.\n\n### Root Cause\n\nJAX's `jnp.where` evaluates **all branches** during backpropagation, even if those branches weren't taken in the forward pass. The current implementation uses nested `jnp.where` to select between 4 regions:\n\n```python\nw = jnp.where(\n    s \u003e= 15.0,\n    region1(x, y, t),  # asymptotic\n    jnp.where(\n        s \u003e= 5.5,\n        region2(x, y, t),\n        jnp.where(\n            y \u003e= 0.195 * jnp.abs(x) - 0.176,\n            region3(x, y, t),  # rational approx\n            region4(x, y, t),  # exponential term\n        ),\n    ),\n)\n```\n\n**Region 4 contains `jnp.exp(u)` where `u = t*t`**. When parameters are far from Region 4 (large `s`), `u` becomes very large, causing `exp(u) → ∞`. During forward pass, `jnp.where` correctly selects a different branch. During backward pass, JAX computes gradients through ALL branches, propagating NaN/Inf from Region 4.\n\n### Observed Behavior\n\n- **Single-line models**: Work correctly (tested successfully)\n- **Multi-line models**: NaN gradients at `log_ne \u003e= 17.5`\n- **Current workaround**: Limited `log_ne_range` to (15.0, 17.0) in `PriorConfig`\n- **Partial fix attempted**: Added `u_clipped = jnp.clip(jnp.real(u), -50.0, 50.0)` in `bayesian.py` copy - insufficient\n\n### Impact\n\n- MCMC sampling blocked for realistic plasma conditions (n_e \u003e 10^17 cm^-3)\n- Uncertainty quantification incomplete for Phase 3\n- Limits scientific applicability of Bayesian inference\n\n## Technical Approaches\n\n### Option 1: Custom VJP (Recommended)\n\nUse `jax.custom_vjp` to define gradient manually, bypassing problematic branch evaluation:\n\n```python\n@jax.custom_vjp\ndef faddeeva_safe(z):\n    return _faddeeva_humlicek_impl(z)\n\ndef faddeeva_fwd(z):\n    return faddeeva_safe(z), z  # Save z for backward\n\ndef faddeeva_bwd(z, g):\n    # Compute gradient only for the region actually used\n    # Use finite differences or symbolic derivative\n    pass\n```\n\n**Pros**: Minimal code change, exact control over gradient computation\n**Cons**: Requires correct analytical gradient derivation\n\n### Option 2: `jax.lax.switch` with Safe Branches\n\nReplace `jnp.where` nesting with `jax.lax.switch` which has better short-circuit behavior:\n\n```python\ndef faddeeva_safe(z):\n    region_idx = compute_region_index(z)\n    return jax.lax.switch(\n        region_idx,\n        [region1_safe, region2_safe, region3_safe, region4_safe],\n        z\n    )\n```\n\nEach branch must be numerically safe for ANY input (not just its valid region).\n\n**Pros**: Clean conditional selection\n**Cons**: Still evaluates all branches during tracing; requires safe implementations\n\n### Option 3: Unified Rational Approximation\n\nReplace Humlicek W4 with a single approximation valid everywhere (no branching):\n\n- **Weideman 34-term approximation**: Single formula, ~10^-5 accuracy\n- **Poppe-Wijers algorithm**: Continued fraction, stable but slower\n- **Abrarov-Quine approximation**: Highly accurate, single expression\n\n```python\ndef faddeeva_weideman(z):\n    # 34-term rational approximation\n    # No branching, uniform accuracy, gradient-safe\n    L = 4.0\n    N = 34\n    ...\n```\n\n**Pros**: No branching at all, gradient-safe by construction\n**Cons**: May be slightly slower; needs accuracy validation\n\n### Option 4: Hybrid - Safe Exponential Everywhere\n\nMake Region 4 safe for any input by clamping the exponential:\n\n```python\ndef region4_safe(x, y, t):\n    u = t * t\n    # Safe exponential: exp(clip(u, -50, 50))\n    exp_u = jnp.exp(jnp.clip(jnp.real(u), -50.0, 50.0) + 1j * jnp.imag(u))\n    # Rest of computation...\n```\n\n**Pros**: Minimal change to existing code\n**Cons**: May introduce small discontinuities at clip boundaries\n\n## Acceptance Criteria\n\n1. [ ] All 21 existing `test_bayesian.py` tests pass\n2. [ ] MCMC sampling works for multi-line models (unskip smoke test)\n3. [ ] Voigt profile gradients finite for `log_ne ∈ [15, 19]`\n4. [ ] `PriorConfig.log_ne_range` restored to (15.0, 19.0)\n5. [ ] Accuracy validation: |new - scipy.wofz| \u003c 1e-4 relative error\n6. [ ] Performance: No more than 2x slowdown vs current implementation\n7. [ ] Unit tests for gradient computation at edge cases\n\n## Files to Modify\n\n- `cflibs/radiation/profiles.py` - Main Voigt/Faddeeva implementation\n- `cflibs/inversion/bayesian.py` - Remove duplicated `_faddeeva_safe_jax`, use unified implementation\n- `tests/test_profiles.py` - Add gradient stability tests\n- `tests/test_bayesian.py` - Unskip MCMC smoke test\n\n## References\n\n- Humlicek (1982) JQSRT 27, 437 - Original W4 algorithm\n- Weideman (1994) SIAM J. Numer. Anal. 31, 1497 - 34-term approximation\n- Abrarov \u0026 Quine (2011) Appl. Math. Comp. 218, 1894 - Efficient Voigt\n- JAX autodiff docs: https://jax.readthedocs.io/en/latest/notebooks/Custom_derivative_rules_for_Python_code.html","notes":"Discovered during CF-LIBS-0oq MCMC implementation. Blocks full uncertainty quantification.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T10:05:17.109058-06:00","created_by":"briansquires","updated_at":"2026-01-09T10:25:49.419944-06:00","closed_at":"2026-01-09T10:25:49.419944-06:00","close_reason":"Implemented Weideman (1994) rational Faddeeva approximation - branch-free with stable gradients. MCMC now works for multi-line models across full log_ne range (15-19). All 25 bayesian tests pass including MCMC smoke test."}
{"id":"CF-LIBS-4eh","title":"CF-LIBS Implementation Priorities (Literature Review)","description":"Implementation priorities identified from systematic literature review of high-performance LIBS algorithms (2018-2025). Covers robust Boltzmann fitting, self-absorption correction, line quality scoring, Bayesian UQ, and future directions including multi-element optimization, transfer learning, and real-time pipelines.\n\nReference: docs/literature/high_performance_libs_algorithms.md\n\n## Scope\n- Immediate priorities (Phase 2-3): Robust algorithms, validation, integration\n- Future directions (Phase 4+): Advanced ML, real-time deployment\n\n## Success Criteria\n- All immediate priority algorithms validated against literature benchmarks\n- Documentation updated with algorithmic references\n- Test coverage for edge cases identified in literature","notes":"Epic complete. All P1/P2 child issues closed:\n- CF-LIBS-4eh.1: RANSAC/Huber robust fitting (20 tests)\n- CF-LIBS-4eh.2: Self-absorption validation (46 tests)  \n- CF-LIBS-4eh.3: Line quality integration (42 tests)\n- CF-LIBS-4eh.4: Bayesian posterior predictive checks (57 tests)\n\nROADMAP.md updated with Literature Review section.\nP3/P4 items (multi-element optimization, transfer learning, real-time pipeline) remain open for future work.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T13:01:59.32337-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:12:05.38144-06:00","closed_at":"2026-01-09T14:12:05.381445-06:00"}
{"id":"CF-LIBS-4eh.1","title":"Robust Boltzmann Plot Fitting with Outlier Rejection","description":"Harden Boltzmann plot fitting algorithm with robust statistical methods identified in literature.\n\n## Requirements\n- Weighted regression accounting for line intensity uncertainties (SNR-based weights)\n- RANSAC (Random Sample Consensus) outlier rejection for self-absorbed lines\n- Sigma-clipping for anomalous data points\n- Multi-element joint fitting option to improve temperature accuracy\n\n## Literature References\n- El Sherbini et al. (2020): Curve-of-growth self-absorption detection\n- Standard robust regression techniques (Huber, bisquare)\n\n## Acceptance Criteria\n- [ ] Weighted regression implemented with SNR-derived weights\n- [ ] RANSAC outlier rejection with configurable threshold\n- [ ] Sigma-clipping with configurable sigma level\n- [ ] Unit tests with synthetic spectra including outliers\n- [ ] Integration tests with real LIBS data","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T13:02:38.281309-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:35:56.760897-06:00","closed_at":"2026-01-09T13:35:56.760897-06:00","close_reason":"Implemented RANSAC, Huber, and sigma-clip fitting methods with comprehensive tests. All 20 Boltzmann tests pass.","dependencies":[{"issue_id":"CF-LIBS-4eh.1","depends_on_id":"CF-LIBS-4eh","type":"parent-child","created_at":"2026-01-09T13:02:38.28577-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4eh.2","title":"Validate Self-Absorption Correction Framework","description":"Validate and test the iterative self-absorption correction framework against literature methods.\n\n## Requirements\n- Escape factor estimation from line shapes\n- Recursive intensity correction with convergence monitoring\n- Curve-of-growth method validation\n- Optically thin reference line comparison\n\n## Literature References\n- El Sherbini et al. (2020): Curve-of-growth method\n- Sun \u0026 Yu (2021): Automatic self-absorption correction algorithm\n- Bredice et al. (2006): Self-absorption evaluation methods\n\n## Acceptance Criteria\n- [ ] Convergence monitoring with configurable tolerance\n- [ ] Validation against published correction factors\n- [ ] Test cases for weak, moderate, and strong self-absorption\n- [ ] Documentation of correction algorithm limitations","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T13:02:38.549023-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:39:24.089777-06:00","closed_at":"2026-01-09T13:39:24.089777-06:00","close_reason":"All acceptance criteria met: comprehensive docstring with 6 limitations, validation tests against published f(τ) values, 46 passing tests covering τ from 0.01 to 10.0","dependencies":[{"issue_id":"CF-LIBS-4eh.2","depends_on_id":"CF-LIBS-4eh","type":"parent-child","created_at":"2026-01-09T13:02:38.549751-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4eh.3","title":"Line Quality Scoring Integration Testing","description":"Integration testing for line quality scoring system combining SNR, isolation, and atomic data reliability.\n\n## Requirements\n- Validate composite score: SNR × isolation × atomic data quality\n- Test automatic line selection for Boltzmann plots\n- Verify scoring consistency across different sample types\n- Benchmark against manual expert line selection\n\n## Literature References\n- Clegg et al. (2017): Multivariate line selection strategies\n- Various CF-LIBS papers emphasizing line selection importance\n\n## Acceptance Criteria\n- [ ] Integration tests for line selector with solver pipeline\n- [ ] Comparison tests: auto-selected vs. manual line sets\n- [ ] Documentation of scoring algorithm and thresholds\n- [ ] Edge case tests: low SNR, crowded spectra, missing atomic data","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T13:02:38.807846-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:47:13.842145-06:00","closed_at":"2026-01-09T13:47:13.842145-06:00","close_reason":"All acceptance criteria met: integration tests with Boltzmann fitter, auto vs manual comparison tests, comprehensive module documentation, 42 passing tests covering crowded spectra and edge cases","dependencies":[{"issue_id":"CF-LIBS-4eh.3","depends_on_id":"CF-LIBS-4eh","type":"parent-child","created_at":"2026-01-09T13:02:38.808542-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4eh.4","title":"Refine Bayesian MCMC Uncertainty Quantification","description":"Refine MCMC sampling implementation for temperature and concentration posteriors based on literature best practices.\n\n## Requirements\n- NUTS sampler tuning for LIBS parameter space\n- Diagnostic checks (R-hat, ESS, divergences)\n- Prior selection guidance for different sample types\n- Posterior predictive checks for model validation\n\n## Literature References\n- Hoffman \u0026 Gelman (2014): NUTS sampler\n- Phan et al. (2019): NumPyro composable effects\n- Recent Bayesian spectroscopy literature\n\n## Acceptance Criteria\n- [ ] Convergence diagnostics integrated into workflow\n- [ ] Prior sensitivity analysis documented\n- [ ] Posterior predictive checks implemented\n- [ ] Performance benchmarks for typical analysis\n- [ ] User guide for Bayesian analysis mode","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T13:02:39.074705-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:52:13.440224-06:00","closed_at":"2026-01-09T13:52:13.440224-06:00","close_reason":"Implemented posterior predictive checks, added comprehensive User Guide and Prior Selection Guide documentation, convergence diagnostics section, and prior sensitivity analysis guidance. All tests pass.","dependencies":[{"issue_id":"CF-LIBS-4eh.4","depends_on_id":"CF-LIBS-4eh","type":"parent-child","created_at":"2026-01-09T13:02:39.07549-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4eh.5","title":"Multi-Element Joint Optimization","description":"Future direction: Simultaneous optimization of temperature, electron density, and all concentrations.\n\n## Motivation\nLiterature indicates that sequential single-element analysis ignores correlations and constraints. Joint optimization improves accuracy and ensures consistency.\n\n## Requirements\n- Simultaneous T, n_e, and concentration optimization\n- Constraint satisfaction ensuring closure equation\n- Efficient optimization for 10+ element systems\n\n## Literature References\n- Various CF-LIBS papers noting limitations of sequential analysis\n- Multi-task learning approaches in ML-LIBS literature\n\n## Phase\nPhase 4+ (future direction)","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-09T13:02:39.334108-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:02:39.334108-06:00","dependencies":[{"issue_id":"CF-LIBS-4eh.5","depends_on_id":"CF-LIBS-4eh","type":"parent-child","created_at":"2026-01-09T13:02:39.334719-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4eh.6","title":"Transfer Learning Framework for Instrument Calibration","description":"Future direction: Calibration transfer between LIBS instruments using domain adaptation.\n\n## Motivation\nDifferent LIBS systems require separate calibrations. Transfer learning can reduce calibration burden and improve model portability.\n\n## Requirements\n- Domain adaptation for instrumental differences\n- Fine-tuning with minimal target-domain data\n- Mathematical correction approaches\n\n## Literature References\n- Recent transfer learning papers in LIBS (2022-2025)\n- Domain adaptation techniques from ML literature\n\n## Phase\nPhase 4+ (future direction)","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-09T13:02:39.603362-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:02:39.603362-06:00","dependencies":[{"issue_id":"CF-LIBS-4eh.6","depends_on_id":"CF-LIBS-4eh","type":"parent-child","created_at":"2026-01-09T13:02:39.603953-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4eh.7","title":"Real-Time Analysis Pipeline","description":"Future direction: Streaming spectrum analysis for real-time LIBS monitoring.\n\n## Motivation\nIndustrial and field applications require real-time or near-real-time analysis. Edge deployment enables portable standalone systems.\n\n## Requirements\n- Streaming spectrum analysis architecture\n- Edge deployment optimization (quantization, pruning)\n- Sub-second analysis latency targets\n\n## Literature References\n- Mahyari et al. (2025): Real-time 3D mapping\n- Edge computing and model optimization literature\n\n## Phase\nPhase 4+ (future direction)","status":"open","priority":4,"issue_type":"feature","created_at":"2026-01-09T13:02:39.878898-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:02:39.878898-06:00","dependencies":[{"issue_id":"CF-LIBS-4eh.7","depends_on_id":"CF-LIBS-4eh","type":"parent-child","created_at":"2026-01-09T13:02:39.879536-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4jd","title":"Implement CF-LIBS quality metrics","description":"Need objective measures to assess analysis quality. Users must know when to trust results.","design":"Metrics:\\n1. R^2 of Boltzmann fit (linearity of LTE)\\n2. Saha-Boltzmann consistency (T from Boltzmann vs T from Saha)\\n3. Reconstruction residual χ^2 = Σ(I_meas - I_model)^2\\n4. Inter-element temperature agreement\\n5. Closure residual (how well ΣC matches 1.0)","acceptance_criteria":"- [ ] Metrics computed automatically after analysis\\n- [ ] Thresholds for acceptable/warning/reject\\n- [ ] Summary report generation\\n- [ ] Integration with solver workflow","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T14:29:55.754299-06:00","updated_at":"2026-01-08T23:39:26.048843-06:00","closed_at":"2026-01-08T23:39:26.048843-06:00","close_reason":"Code implemented and validated with 95 passing tests (88% average coverage)","dependencies":[{"issue_id":"CF-LIBS-4jd","depends_on_id":"CF-LIBS-4xu","type":"parent-child","created_at":"2025-12-06T14:31:23.114915-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-4jd","depends_on_id":"CF-LIBS-970","type":"blocks","created_at":"2025-12-06T14:35:56.071284-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-4wl","title":"Implement round-trip testing framework","description":"Validate inversion by generating synthetic spectra with known parameters, adding noise, then inverting. Critical for ensuring inversion accuracy.","design":"1. Generate Golden Spectra with fixed seeds and known (T, ne, composition)\\n2. Noise model: Poisson (shot) + Gaussian (readout)\\n3. Run inversion on noisy spectra\\n4. Verify parameter recovery: T±5%, ne±20%, C±10%\\n5. CI integration for regression testing","acceptance_criteria":"- [ ] Golden spectra reproducible (fixed seeds)\\n- [ ] Noise model realistic\\n- [ ] Parameter recovery within tolerances\\n- [ ] Automated in CI pipeline","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T14:30:37.963819-06:00","updated_at":"2026-01-09T07:56:14.205071-06:00","closed_at":"2026-01-09T07:56:14.205071-06:00","close_reason":"Implemented round-trip testing framework with GoldenSpectrumGenerator, NoiseModel, and RoundTripValidator. 17 tests passing.","dependencies":[{"issue_id":"CF-LIBS-4wl","depends_on_id":"CF-LIBS-cxm","type":"parent-child","created_at":"2025-12-06T14:31:23.265705-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-4wl","depends_on_id":"CF-LIBS-1mb","type":"blocks","created_at":"2026-01-09T05:37:59.994245-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-4xu","title":"Phase 2c: Quality Metrics and Diagnostics","description":"Tools for validating CF-LIBS results and propagating uncertainties. Essential for production use where result quality must be assessed.","design":"1. Quality metrics (R^2, consistency, residuals)\\n2. Error propagation (analytical + Monte Carlo)\\n3. Diagnostic plots (Boltzmann, Saha-Boltzmann)\\n4. LTE validity checks","acceptance_criteria":"- [ ] Quality metrics correctly flag bad analyses\\n- [ ] Error bars on T, ne, concentrations\\n- [ ] Diagnostic plots match literature format\\n- [ ] LTE warnings when appropriate","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-06T14:29:54.721368-06:00","updated_at":"2026-01-08T23:39:26.055285-06:00","closed_at":"2026-01-08T23:39:26.055285-06:00","close_reason":"Code implemented and validated with 95 passing tests (88% average coverage)"}
{"id":"CF-LIBS-57i","title":"[Impl] Implement test_line_selection.py","notes":"Use code-review subagent after implementation. Tests for LineSelector: scoring calculation, rejection criteria, energy spread warnings. Can run in PARALLEL with other test file implementations after fixtures ready.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:30:21.892245-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:11.810871-06:00","closed_at":"2026-01-08T23:08:11.810871-06:00","close_reason":"Implemented 95 passing tests across quality, self_absorption, and line_selection","labels":["parallel","subagent:code-review"],"dependencies":[{"issue_id":"CF-LIBS-57i","depends_on_id":"CF-LIBS-86n","type":"blocks","created_at":"2026-01-08T22:31:15.116952-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-57i","depends_on_id":"CF-LIBS-xmb","type":"parent-child","created_at":"2026-01-08T22:31:49.885501-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-58w","title":"[Verify] Run tests and check coverage","notes":"Run pytest with coverage after all test files implemented. Command: pytest tests/test_quality.py tests/test_self_absorption.py tests/test_line_selection.py --cov=cflibs/inversion --cov-report=term-missing. Target: 80%+ coverage. Use Bash subagent.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:30:33.681226-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:31.962582-06:00","closed_at":"2026-01-08T23:08:31.962582-06:00","close_reason":"95 tests passing, coverage: 97% line_selection, 90% quality, 78% self_absorption","labels":["subagent:Bash"],"dependencies":[{"issue_id":"CF-LIBS-58w","depends_on_id":"CF-LIBS-rtu","type":"blocks","created_at":"2026-01-08T22:31:16.969415-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-58w","depends_on_id":"CF-LIBS-xk7","type":"blocks","created_at":"2026-01-08T22:31:17.016748-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-58w","depends_on_id":"CF-LIBS-57i","type":"blocks","created_at":"2026-01-08T22:31:17.064407-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-58w","depends_on_id":"CF-LIBS-xmb","type":"parent-child","created_at":"2026-01-08T22:31:49.887487-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-59b","title":"Phase 2b: Classic CF-LIBS Implementation","description":"Implement the standard calibration-free LIBS algorithm used in literature. This is the core functionality that makes CF-LIBS work - iterative Saha-Boltzmann solver with closure equation normalization.","design":"1. Iterative relaxation solver (T, ne, concentrations)\\n2. Boltzmann plot tools with linear regression\\n3. Closure equation (standard, matrix mode, oxide mode)\\n4. Self-absorption correction (recursive)\\n5. Automatic line selection","acceptance_criteria":"- [ ] Iterative solver converges for typical LIBS conditions\\n- [ ] Boltzmann plot R^2 \u003e 0.95 for good LTE plasmas\\n- [ ] Closure modes work (standard, matrix, oxide)\\n- [ ] Self-absorption correction reduces systematic errors\\n- [ ] Line selector excludes resonance lines by default","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T14:29:29.767296-06:00","updated_at":"2025-12-06T15:16:39.552206-06:00","closed_at":"2025-12-06T15:16:39.552206-06:00","dependencies":[{"issue_id":"CF-LIBS-59b","depends_on_id":"CF-LIBS-i0q","type":"blocks","created_at":"2025-12-06T14:35:56.111853-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-5jp","title":"Surpass libssa: High-Performance Architecture \u0026 Advanced Features","description":"Comprehensive modernization to exceed libssa capabilities using JAX, HDF5, and rigorous physics. Focus on performance, scalability, and robust feature set.","notes":"Based on analysis in docs/REFERENCE_ANALYSIS_LIBSSA.md. Goal is to exceed libssa in performance (JAX) and scale (HDF5) while matching its feature set.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-07T08:23:34.920781-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:36:18.417366-06:00","closed_at":"2026-01-09T14:36:18.417366-06:00","close_reason":"Restructuring: Replaced by ROADMAP phase tracking. Goals achieved through Phase 2-3 completion.","dependencies":[{"issue_id":"CF-LIBS-5jp","depends_on_id":"CF-LIBS-q30","type":"parent-child","created_at":"2026-01-07T08:24:06.129761-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-5jp","depends_on_id":"CF-LIBS-8k9","type":"parent-child","created_at":"2026-01-07T08:24:11.186732-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-5jp","depends_on_id":"CF-LIBS-1ie","type":"parent-child","created_at":"2026-01-07T08:24:16.269609-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-5jp","depends_on_id":"CF-LIBS-hxw","type":"parent-child","created_at":"2026-01-07T08:24:21.327845-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-5py","title":"Phase 4c: Physics Refinements","description":"# Phase 4c: Physics Refinements\n\nAdvanced physics corrections identified through NotebookLM literature analysis.\n\n## NotebookLM Analysis Findings\n\n### Self-Absorption Complexity\n\u003e \"While the codebase includes recursive self-absorption correction, the literature indicates this is a highly complex phenomenon often requiring Curve-of-Growth (COG) methods or Column Density Saha-Boltzmann (CD-SB) plotting. The current 'recursive correction' may not capture the full complexity of optically thick plasmas as effectively as the CD-SB method for resonance lines.\"\n\n### Matrix Effect Correction\n\u003e \"Literature identifies the automated handling of sample matrix variations as a research gap. While the code supports 'Matrix mode' closure, explicit correction algorithms for complex matrix effects (beyond standard CF-LIBS assumptions) appear limited.\"\n\n## Tasks\n\n### Self-Absorption Enhancements (P2)\n1. Implement Curve-of-Growth (COG) method for optical depth estimation\n2. Implement Column Density Saha-Boltzmann (CD-SB) plotting\n3. Add resonance line special handling\n4. Validate against literature benchmarks\n\n### Matrix Effect Correction (P2)\n1. Implement matrix-matched calibration transfer\n2. Add internal standardization support\n3. Develop matrix classification system\n4. Create correction factor database\n\n### Error Propagation (P2)\n1. Monte Carlo error propagation for full pipeline\n2. Analytical error formulas for closed-form cases\n3. Sensitivity analysis tools\n4. Uncertainty budget reporting\n\n## Success Criteria\n- COG method validated against published optical depths\n- Matrix correction improves accuracy on mixed samples\n- Full uncertainty chain from spectrum to concentration\n- Documentation with physics explanations","status":"open","priority":2,"issue_type":"epic","owner":"squires.b@gmail.com","created_at":"2026-01-16T13:54:49.548241-06:00","created_by":"TheFermiSea","updated_at":"2026-01-16T13:54:49.548241-06:00"}
{"id":"CF-LIBS-5xz","title":"Implement Vectorized Voigt Profile","description":"Implement Faddeeva/Voigt function using JAX for differentiable line profiles.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T08:25:12.936836-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:04:13.641509-06:00","closed_at":"2026-01-09T11:04:13.641509-06:00","close_reason":"Implemented gradient-stable Weideman (1994) rational Faddeeva approximation in voigt_profile_jax(). N=36 terms, ~1e-8 accuracy, branch-free for JAX autodiff. See CF-LIBS-452 for details."}
{"id":"CF-LIBS-60j","title":"[Plan] Design QualityAssessor test specifications","notes":"Use Plan subagent to design test specs for quality.py. Include: threshold boundary tests, metric calculation verification, quality flag determination. Reference research: phase2c-validation-research.md findings on QualityMetrics thresholds.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:29:37.494053-06:00","created_by":"briansquires","updated_at":"2026-01-08T22:58:34.712964-06:00","closed_at":"2026-01-08T22:58:34.712964-06:00","close_reason":"Plan subagent completed test specifications","labels":["parallel","subagent:Plan"],"dependencies":[{"issue_id":"CF-LIBS-60j","depends_on_id":"CF-LIBS-tqq","type":"parent-child","created_at":"2026-01-08T22:31:48.843169-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-6o9","title":"[Verify] Code review all test files","notes":"Use code-review subagent to review all three test files for: code quality, test coverage, edge cases, consistency with cflibs patterns. Can run after tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:30:35.130187-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:38.554847-06:00","closed_at":"2026-01-08T23:08:38.554847-06:00","close_reason":"Phase 2c validation testing complete - 95 tests, 88% average coverage","labels":["subagent:code-review"],"dependencies":[{"issue_id":"CF-LIBS-6o9","depends_on_id":"CF-LIBS-58w","type":"blocks","created_at":"2026-01-08T22:31:18.402179-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-6o9","depends_on_id":"CF-LIBS-xmb","type":"parent-child","created_at":"2026-01-08T22:31:49.889166-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-6vf","title":"Implement Boltzmann plot generation and fitting","description":"Boltzmann plots are fundamental to CF-LIBS temperature determination. Plot ln(Iλ/gA) vs E_k, slope gives -1/kT.","design":"1. Data structure for line observations\\n2. Weighted linear regression (w = 1/σ_I^2)\\n3. Outlier rejection (RANSAC or sigma-clipping)\\n4. Visualization output (matplotlib compatible)\\n5. Uncertainty estimation from covariance matrix","acceptance_criteria":"- [ ] Plot generation matches literature format\\n- [ ] Slope correctly gives temperature\\n- [ ] Outlier rejection handles self-absorbed lines\\n- [ ] Uncertainty in T estimated correctly","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T14:29:30.872373-06:00","updated_at":"2025-12-06T15:11:14.16835-06:00","closed_at":"2025-12-06T15:11:14.16835-06:00"}
{"id":"CF-LIBS-74r","title":"[Plan] Design shared test fixtures","notes":"Use Plan subagent to design reusable fixtures for conftest.py. Include: synthetic_observations(), quality_input_set(), self_absorption_test_lines(). Based on existing create_synthetic_lines() pattern in test_boltzmann.py.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:29:56.327605-06:00","created_by":"briansquires","updated_at":"2026-01-08T22:58:34.71945-06:00","closed_at":"2026-01-08T22:58:34.71945-06:00","close_reason":"Plan subagent completed test specifications","labels":["parallel","subagent:Plan"],"dependencies":[{"issue_id":"CF-LIBS-74r","depends_on_id":"CF-LIBS-tqq","type":"parent-child","created_at":"2026-01-08T22:31:48.874562-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-86n","title":"[Impl] Implement shared test fixtures in conftest.py","notes":"Implement fixtures designed in planning phase. Add to tests/conftest.py. Include: synthetic_observations(), quality_input_set(), mock partition functions. Must complete BEFORE parallel test implementation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:30:18.935338-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:03:16.212838-06:00","closed_at":"2026-01-08T23:03:16.212838-06:00","close_reason":"Implemented 7 Phase 2c fixtures in conftest.py","dependencies":[{"issue_id":"CF-LIBS-86n","depends_on_id":"CF-LIBS-qoo","type":"blocks","created_at":"2026-01-08T22:31:07.348969-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-86n","depends_on_id":"CF-LIBS-xmb","type":"parent-child","created_at":"2026-01-08T22:31:49.860083-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-8k9","title":"Advanced Signal Processing \u0026 Preprocessing","description":"Implement robust signal cleaning, outlier removal (SAM/MAD), and normalization.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-07T08:23:45.049542-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:36:18.9343-06:00","closed_at":"2026-01-09T14:36:18.9343-06:00","close_reason":"Restructuring: Signal processing tasks moved to Implementation Backlog. Epic tracking replaced by ROADMAP.","dependencies":[{"issue_id":"CF-LIBS-8k9","depends_on_id":"CF-LIBS-n95","type":"blocks","created_at":"2026-01-07T08:27:51.157988-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8k9","depends_on_id":"CF-LIBS-gy2","type":"blocks","created_at":"2026-01-07T08:27:56.211-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-8o7","title":"Fix Doppler broadening calculation in SpectrumModel","description":"spectrum_model.py:114-121 uses ad-hoc approximation σ=0.01*sqrt(T_eV/0.86) instead of proper mass-dependent Doppler formula. Produces incorrect line widths.","design":"Replace with: Δλ_D = λ_0 * sqrt(2kT / mc^2)\\nRequires: atomic mass from database for each element\\nMust update both NumPy and JAX paths","acceptance_criteria":"- [ ] Doppler width uses correct formula\\n- [ ] Atomic mass retrieved from database\\n- [ ] Line widths match literature values\\n- [ ] Both SpectrumModel and ManifoldGenerator fixed","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-06T14:30:38.97733-06:00","updated_at":"2025-12-06T15:04:24.980368-06:00","closed_at":"2025-12-06T15:04:24.980368-06:00","dependencies":[{"issue_id":"CF-LIBS-8o7","depends_on_id":"CF-LIBS-i0q","type":"parent-child","created_at":"2025-12-06T14:31:20.899387-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-8rh","title":"Research Roadmap","description":"Future research directions and advanced features for CF-LIBS.\n\n## Tasks (P3/P4)\n- Benchmark database for LIBS spectra\n- Matrix effect correction methods\n- Multi-element joint optimization\n- Transfer learning for instrument calibration\n- Temporal dynamics optimization\n- Interpretable ML for spectral analysis\n- Physics-informed neural networks\n- Real-time analysis pipeline\n\n## Success Criteria\n- Feasibility assessments completed\n- Prototype implementations for high-priority items\n- Publication-ready algorithmic contributions\n\nReference: docs/literature/high_performance_libs_algorithms.md","status":"open","priority":3,"issue_type":"epic","created_at":"2026-01-09T14:36:50.107273-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:36:50.107273-06:00","dependencies":[{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-h1l.1","type":"blocks","created_at":"2026-01-09T14:37:26.911517-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-h1l.2","type":"blocks","created_at":"2026-01-09T14:37:26.962423-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-4eh.5","type":"blocks","created_at":"2026-01-09T14:37:27.00904-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-4eh.6","type":"blocks","created_at":"2026-01-09T14:37:27.055665-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-h1l.4","type":"blocks","created_at":"2026-01-09T14:37:27.10288-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-h1l.5","type":"blocks","created_at":"2026-01-09T14:37:27.148981-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-h1l.6","type":"blocks","created_at":"2026-01-09T14:37:27.198619-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-8rh","depends_on_id":"CF-LIBS-4eh.7","type":"blocks","created_at":"2026-01-09T14:37:27.247593-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-970","title":"Implement iterative CF-LIBS solver","description":"Core algorithm: iterative relaxation solver that self-consistently determines T, ne, and concentrations. U(T) and ne depend on T, creating circular dependencies that require iteration.","design":"Algorithm:\\n1. Initialize T0=10000K, ne0=1e17 cm-3\\n2. Calculate U(T) for all species\\n3. Correct ionic lines to neutral Boltzmann plane\\n4. Weighted linear regression for T\\n5. Extract species intercepts -\u003e concentrations\\n6. Apply closure equation (ΣC=1)\\n7. Update ne via Saha\\n8. Iterate until ΔT \u003c ε","acceptance_criteria":"- [ ] Converges in \u003c20 iterations for typical conditions\\n- [ ] T, ne match literature values for benchmark spectra\\n- [ ] Concentrations sum to 1.0 after closure\\n- [ ] Handles multiple elements simultaneously","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T14:29:31.888343-06:00","updated_at":"2025-12-06T15:16:14.400206-06:00","closed_at":"2025-12-06T15:16:14.400206-06:00","dependencies":[{"issue_id":"CF-LIBS-970","depends_on_id":"CF-LIBS-irv","type":"blocks","created_at":"2025-12-06T14:35:55.984584-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-970","depends_on_id":"CF-LIBS-6vf","type":"blocks","created_at":"2025-12-06T14:35:56.029593-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-ak3","title":"Implementation Backlog","description":"Near-term implementation priorities for CF-LIBS Phase 4.\n\n## Tasks (P1/P2)\n- Uncertainty propagation pipeline\n- PCA pipeline (JAX)\n- PLS regression\n- MAD outlier removal\n- SAM outlier detection\n\n## Success Criteria\n- All tasks have tests\n- Documentation updated\n- Integration with existing modules","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-09T14:36:43.562625-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:36:43.562625-06:00","dependencies":[{"issue_id":"CF-LIBS-ak3","depends_on_id":"CF-LIBS-h1l.3","type":"blocks","created_at":"2026-01-09T14:37:18.184634-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-ak3","depends_on_id":"CF-LIBS-0xd","type":"blocks","created_at":"2026-01-09T14:37:18.233594-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-ak3","depends_on_id":"CF-LIBS-r89","type":"blocks","created_at":"2026-01-09T14:37:18.280178-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-ak3","depends_on_id":"CF-LIBS-gy2","type":"blocks","created_at":"2026-01-09T14:37:18.331229-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-ak3","depends_on_id":"CF-LIBS-n95","type":"blocks","created_at":"2026-01-09T14:37:18.37507-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-ant","title":"Fix test_apply_instrument_function_jax wavelength grid validation","description":"test_instrument.py::test_apply_instrument_function_jax fails with ValueError: Wavelength grid must be evenly spaced for convolution. The test creates a wavelength grid using linspace which should be evenly spaced, but the validation check in apply_instrument_function_jax is failing. Pre-existing issue discovered during CF-LIBS-4eh testing.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T14:02:03.446739-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:05:51.784503-06:00","closed_at":"2026-01-09T14:05:51.784503-06:00","close_reason":"Fixed by relaxing rtol from 1e-6 to 1e-4 in JAX version to accommodate float32 precision. All 10 instrument tests pass."}
{"id":"CF-LIBS-c2u","title":"Documentation refactoring","description":"Current documentation is inaccurate and misleading. Claims features that don't exist, uses wrong terminology (Computational Framework vs Calibration-Free). Must be completely overhauled.","design":"1. Archive obsolete docs to legacy/docs/\\n2. Update README with accurate current state\\n3. Create ROADMAP.md with revised phases\\n4. Update CLAUDE.md for accurate developer guidance\\n5. Remove redundant summary files","acceptance_criteria":"- [ ] README accurately describes current capabilities\\n- [ ] CF-LIBS correctly identified as Calibration-Free LIBS\\n- [ ] Phase documentation reflects actual plan\\n- [ ] No misleading feature claims","notes":"COMPLETED: Documentation refactoring.\n\nChanges made:\n1. Archived 13 obsolete/redundant docs to legacy/docs/:\n   - ARCHITECTURE_*.md, CI_PIPELINE.md, DEVELOPMENT_GUIDE_V1.md\n   - ECHELLE_UPGRADE_SUMMARY.md, HARDWARE_INTERFACES_SUMMARY.md\n   - HIGH_THROUGHPUT_FRAMEWORK.md, IMPLEMENTATION_SUMMARY.md\n   - PR_*.md, README_PHASE*.md, GEMINI.md\n\n2. Created legacy/docs/README.md index of archived files\n\n3. Rewrote README.md:\n   - Corrected CF-LIBS to 'Calibration-Free LIBS' (not Computational Framework)\n   - Accurate 'What Works Now' vs 'What's Missing' sections\n   - Links to ROADMAP.md for development plan\n   - References to bd for issue tracking\n\n4. Created ROADMAP.md:\n   - Detailed Phase 2a-2d breakdown\n   - Links to bd issue IDs for each task\n   - References to CF-LIBS literature (Ciucci, Tognoni)\n\n5. Rewrote CLAUDE.md:\n   - Accurate package structure\n   - Known issues with bd issue references\n   - CF-LIBS physics explanation\n   - Contributing guidelines\n\nNEXT: Close this issue.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T14:30:46.994814-06:00","updated_at":"2025-12-06T14:35:13.920758-06:00","closed_at":"2025-12-06T14:35:13.920758-06:00"}
{"id":"CF-LIBS-c39","title":"Migrate Compute Kernels to JAX","description":"Port standard numpy functions to JAX for JIT compilation and GPU support.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-07T08:24:47.226513-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:37:00.834979-06:00","closed_at":"2026-01-09T11:37:00.834979-06:00","close_reason":"JAX migration complete: 14 files with JAX, including voigt_profile_jax, partition functions, Faddeeva (Weideman), emissivity, convolution, manifold generator. All core compute kernels have JAX versions."}
{"id":"CF-LIBS-cjj","title":"[Plan] Design SelfAbsorptionCorrector test specifications","notes":"Use Plan subagent to design test specs for self_absorption.py. Include: correction round-trip tests, optical depth estimation, doublet ratio estimation. Reference research: f(τ)=(1-exp(-τ))/τ inversion tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:29:38.800834-06:00","created_by":"briansquires","updated_at":"2026-01-08T22:58:34.715373-06:00","closed_at":"2026-01-08T22:58:34.715373-06:00","close_reason":"Plan subagent completed test specifications","labels":["parallel","subagent:Plan"],"dependencies":[{"issue_id":"CF-LIBS-cjj","depends_on_id":"CF-LIBS-tqq","type":"parent-child","created_at":"2026-01-08T22:31:48.853635-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-cjq","title":"Phase 3: Bayesian Methods and Uncertainty Quantification","description":"Full uncertainty quantification via Bayesian inference. Critical for scientific credibility. Includes MCMC sampling, prior specification, and credible interval reporting.","notes":"Iteration 1: Completed nested sampling (CF-LIBS-nfo). Phase 3 now 100% complete.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-09T07:33:27.902635-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:54:08.884602-06:00","closed_at":"2026-01-09T11:54:08.884602-06:00","close_reason":"Phase 3 complete: Bayesian forward model, priors, MCMC sampling (NumPyro NUTS), Voigt gradient fix (Weideman), uncertainty reporting (correlation analysis, ArviZ plots), nested sampling (dynesty). 37 bayesian tests pass.","dependencies":[{"issue_id":"CF-LIBS-cjq","depends_on_id":"CF-LIBS-cxm","type":"blocks","created_at":"2026-01-09T07:34:08.153276-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-cjq","depends_on_id":"CF-LIBS-452","type":"blocks","created_at":"2026-01-09T10:05:39.052512-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-cxm","title":"Phase 2d: Advanced Forward Fitting","description":"Upgrade manifold generator with correct physics, implement hybrid inversion. This is the advanced approach for difficult cases (heavy interference, high opacity).","design":"1. Repair manifold generator physics\\n2. Hybrid inversion: manifold coarse search + L-M refinement\\n3. JAX autodiff for gradient-based optimization\\n4. Round-trip testing framework","acceptance_criteria":"- [ ] Manifold uses correct partition functions\\n- [ ] Manifold includes Stark broadening\\n- [ ] Hybrid inversion converges faster than pure optimization\\n- [ ] Round-trip tests pass with noise","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-06T14:30:17.352342-06:00","updated_at":"2026-01-09T07:59:47.453555-06:00","closed_at":"2026-01-09T07:59:47.453555-06:00","close_reason":"Phase 2d complete: manifold physics repaired (Voigt+Stark), round-trip testing framework (17 tests), hybrid inversion (14 tests)."}
{"id":"CF-LIBS-cxp","title":"Implement Bayesian forward model (log-likelihood)","description":"Create JAX-compatible likelihood function P(spectrum | T, n_e, C) with realistic noise model (Poisson shot noise + Gaussian readout).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T07:33:42.451509-06:00","created_by":"briansquires","updated_at":"2026-01-09T08:32:10.819531-06:00","closed_at":"2026-01-09T08:32:10.819531-06:00","close_reason":"Implemented BayesianForwardModel with full physics (Saha-Boltzmann, Voigt, Stark), log_likelihood function with Poisson+Gaussian noise model. 21 tests passing in tests/test_bayesian.py."}
{"id":"CF-LIBS-czy","title":"[Plan] Design LineSelector test specifications","notes":"Use Plan subagent to design test specs for line_selection.py. Include: scoring verification, rejection criteria, energy spread warnings, max lines limit. Reference research: Score = SNR × (1/unc) × isolation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:29:40.001-06:00","created_by":"briansquires","updated_at":"2026-01-08T22:58:34.717541-06:00","closed_at":"2026-01-08T22:58:34.717541-06:00","close_reason":"Plan subagent completed test specifications","labels":["parallel","subagent:Plan"],"dependencies":[{"issue_id":"CF-LIBS-czy","depends_on_id":"CF-LIBS-tqq","type":"parent-child","created_at":"2026-01-08T22:31:48.863546-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-gy2","title":"Implement MAD Outlier Removal","description":"Median Absolute Deviation algorithm for robust outlier rejection.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T08:24:57.456349-06:00","created_by":"briansquires","updated_at":"2026-01-10T01:00:28.699816-06:00","closed_at":"2026-01-10T01:00:28.699816-06:00","close_reason":"Implemented MAD outlier detection with 30 passing tests (3 modes: 1d, spectrum, channel)"}
{"id":"CF-LIBS-h1l","title":"Research Gaps and Opportunities (Literature Review)","description":"Research gaps and opportunities identified from systematic literature review of high-performance LIBS algorithms. These represent areas where the CF-LIBS library could make novel contributions or where current methods are insufficient.\n\nReference: docs/literature/high_performance_libs_algorithms.md\n\n## Scope\n- Standardized benchmarks and evaluation metrics\n- Matrix effect correction methods\n- Uncertainty propagation throughout analysis pipeline\n- Temporal dynamics and time-resolved optimization\n- Interpretable ML approaches\n\n## Success Criteria\n- Feasibility assessment for each gap\n- Prototype implementations for high-priority gaps\n- Publication-ready algorithmic contributions","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-09T13:01:59.596551-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:36:19.184422-06:00","closed_at":"2026-01-09T14:36:19.184422-06:00","close_reason":"Restructuring: Children migrated to new Research Roadmap epic. Literature review complete."}
{"id":"CF-LIBS-h1l.1","title":"Develop Open LIBS Spectral Benchmark Database","description":"Research gap: Lack of standardized benchmarks for comparing LIBS algorithm performance.\n\n## Problem\nEach publication uses different spectrometers, samples, and evaluation protocols, making cross-study comparison impossible.\n\n## Proposed Solution\nDevelop or contribute to open LIBS spectral databases with:\n- Certified reference material spectra\n- Multiple instrumental conditions documented\n- Standardized train/test splits\n- Community-accepted evaluation metrics\n\n## Research Questions\n- What existing databases can be leveraged?\n- What metrics are appropriate for CF-LIBS vs. ML-LIBS?\n- How to handle instrumental variability in benchmarks?\n\n## Potential Impact\n- Enable fair algorithm comparison\n- Accelerate method development\n- Establish CF-LIBS library as reference implementation","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T13:03:11.750131-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:37:25.662019-06:00","dependencies":[{"issue_id":"CF-LIBS-h1l.1","depends_on_id":"CF-LIBS-h1l","type":"parent-child","created_at":"2026-01-09T13:03:11.754264-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-h1l.2","title":"Investigate Matrix Effect Correction Methods","description":"Research gap: Automated approaches for handling sample matrix variations are underdeveloped.\n\n## Problem\nMatrix effects cause non-linear calibration curves and invalidate CF-LIBS assumptions. Different sample matrices (metals, oxides, organics) require different treatment.\n\n## Research Directions\n- Physics-based matrix correction using plasma modeling\n- Transfer learning across matrix types\n- Self-normalizing approaches robust to matrix variations\n- Internal standardization algorithms\n\n## Research Questions\n- Can plasma modeling predict matrix effects a priori?\n- How much target matrix data is needed for transfer learning?\n- What normalization schemes are most robust?\n\n## Potential Impact\n- Extend CF-LIBS applicability to heterogeneous samples\n- Reduce calibration requirements\n- Enable universal quantification models","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T13:03:12.009998-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:37:25.708766-06:00","dependencies":[{"issue_id":"CF-LIBS-h1l.2","depends_on_id":"CF-LIBS-h1l","type":"parent-child","created_at":"2026-01-09T13:03:12.01067-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-h1l.3","title":"End-to-End Uncertainty Propagation Pipeline","description":"Research gap: Uncertainty quantification from spectrum to concentration is rarely implemented.\n\n## Problem\nMost methods report point estimates without confidence intervals. Users cannot assess reliability of results or make uncertainty-aware decisions.\n\n## Research Directions\n- Bayesian CF-LIBS with full posterior sampling\n- Propagation of spectral noise through entire analysis pipeline\n- Monte Carlo uncertainty propagation\n- Sensitivity analysis for input parameters\n\n## Research Questions\n- What are the dominant uncertainty sources in CF-LIBS?\n- How do atomic data uncertainties propagate?\n- Can we provide meaningful confidence intervals in real-time?\n\n## Potential Impact\n- Enable uncertainty-aware decision making\n- Meet regulatory requirements for quantitative analysis\n- Identify measurement conditions requiring improvement\n\n## Relation to Existing Work\nBuilds on CF-LIBS-4eh.4 (Bayesian MCMC refinement) but extends to full pipeline.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T13:03:12.267964-06:00","created_by":"briansquires","updated_at":"2026-01-09T18:37:32.232191-06:00","closed_at":"2026-01-09T18:37:32.232191-06:00","close_reason":"Implemented correlation-aware uncertainty propagation using uncertainties package. Added covariance_matrix to BoltzmannFitResult, solve_with_uncertainty() method to solver, and new uncertainty.py module. 14 tests pass.","dependencies":[{"issue_id":"CF-LIBS-h1l.3","depends_on_id":"CF-LIBS-h1l","type":"parent-child","created_at":"2026-01-09T13:03:12.268796-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-h1l.3","depends_on_id":"CF-LIBS-4eh.4","type":"blocks","created_at":"2026-01-09T13:03:21.745093-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-h1l.4","title":"Temporal Dynamics and Time-Resolved Optimization","description":"Research gap: Algorithms exploiting time-resolved LIBS data for improved accuracy are underutilized.\n\n## Problem\nPlasma conditions evolve over microsecond timescales. Gate timing affects which plasma region is sampled, impacting LTE validity and self-absorption.\n\n## Research Directions\n- Gate-timing optimization algorithms\n- Temporal feature extraction for classification\n- Dynamic self-absorption correction during plasma evolution\n- Time-resolved temperature and density mapping\n\n## Research Questions\n- What is the optimal gate delay for CF-LIBS accuracy?\n- Can time-resolved data improve element-specific analysis?\n- How does self-absorption evolve temporally?\n\n## Potential Impact\n- Optimize measurement protocols automatically\n- Extract additional information from existing hardware\n- Improve CF-LIBS accuracy through optimal timing","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T13:03:12.519407-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:03:12.519407-06:00","dependencies":[{"issue_id":"CF-LIBS-h1l.4","depends_on_id":"CF-LIBS-h1l","type":"parent-child","created_at":"2026-01-09T13:03:12.520121-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-h1l.5","title":"Interpretable ML for LIBS Spectral Analysis","description":"Research gap: Black box ML predictions limit adoption in regulated industries.\n\n## Problem\nDeep learning models achieve high accuracy but provide no insight into why predictions are made. This limits adoption where interpretability is required (medical, nuclear, quality control).\n\n## Research Directions\n- Attention visualization showing influential wavelengths\n- Physics-guided feature extraction\n- Hybrid models combining interpretable components with flexible ML\n- SHAP/LIME explanations for spectral models\n\n## Research Questions\n- What features do successful ML models actually use?\n- Can physics constraints improve ML interpretability?\n- How to validate ML explanations against spectroscopic knowledge?\n\n## Potential Impact\n- Enable ML adoption in regulated industries\n- Discover new spectroscopic relationships\n- Build trust in automated analysis","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T13:03:12.77917-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:03:12.77917-06:00","dependencies":[{"issue_id":"CF-LIBS-h1l.5","depends_on_id":"CF-LIBS-h1l","type":"parent-child","created_at":"2026-01-09T13:03:12.77984-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-h1l.6","title":"Physics-Informed Neural Networks for LIBS","description":"Research gap: Hybrid approaches incorporating plasma physics constraints into deep learning.\n\n## Problem\nPure data-driven approaches require large training sets and may violate physical constraints. Physics-informed methods could improve extrapolation and reduce data requirements.\n\n## Research Directions\n- Boltzmann constraint layers ensuring thermodynamic equilibrium\n- Saha regularization for ionization balance\n- Energy conservation as soft constraints\n- Differentiable physics models in neural network pipelines\n\n## Research Questions\n- Which physics constraints are most valuable to enforce?\n- How to balance data fit vs. physics compliance?\n- Can PINNs improve CF-LIBS beyond iterative methods?\n\n## Potential Impact\n- Reduce training data requirements\n- Improve extrapolation to new conditions\n- Bridge physics-based and ML approaches","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T13:03:13.03987-06:00","created_by":"briansquires","updated_at":"2026-01-09T13:03:13.03987-06:00","dependencies":[{"issue_id":"CF-LIBS-h1l.6","depends_on_id":"CF-LIBS-h1l","type":"parent-child","created_at":"2026-01-09T13:03:13.040484-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-hxw","title":"Physics Engine Enhancements","description":"Add missing physics features found in libssa: Voigt/Lorentzian profiles and advanced fitting.","notes":"Vectorized Voigt profile (CF-LIBS-5xz) now complete via Weideman approximation. Only remaining dependency: JAX Peak Fitting (CF-LIBS-s2o).","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-07T08:23:55.181606-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:38:25.484412-06:00","closed_at":"2026-01-09T11:38:25.484412-06:00","close_reason":"Physics engine complete: Vectorized Voigt profile (Weideman Faddeeva, CF-LIBS-5xz) and JAX peak fitting engine (SpectralFitter with L-BFGS, CF-LIBS-s2o) both implemented.","dependencies":[{"issue_id":"CF-LIBS-hxw","depends_on_id":"CF-LIBS-5xz","type":"blocks","created_at":"2026-01-07T08:28:11.394174-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-hxw","depends_on_id":"CF-LIBS-s2o","type":"blocks","created_at":"2026-01-07T08:28:16.457719-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-i0q","title":"Phase 2a: Physics Foundation","description":"Critical physics upgrades required before any CF-LIBS inversion can work. Without these, manifolds and inversions produce scientifically invalid results (GIGO principle).","design":"1. Database schema upgrade (Stark params, partition coefficients) 2. Temperature-dependent partition functions 3. Lorentzian/Voigt profiles 4. Stark broadening","acceptance_criteria":"- [ ] Database has stark_w, stark_alpha, stark_shift columns\\n- [ ] Partition function polynomial evaluator works in JAX\\n- [ ] Voigt profile implemented (Humlicek approximation)\\n- [ ] Stark width scaling implemented","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T14:28:39.959359-06:00","updated_at":"2025-12-06T15:08:01.581006-06:00","closed_at":"2025-12-06T15:08:01.581006-06:00"}
{"id":"CF-LIBS-irv","title":"Implement temperature-dependent partition functions","description":"Manifold generator uses hard-coded constants (U_Z0=25, U_Z1=15). This produces scientifically invalid ionization balances. Must implement proper T-dependent partition functions.","design":"1. Polynomial evaluator: log(U) = Σ a_n (log T)^n (Irwin form)\\n2. JAX-compatible implementation for manifold generator\\n3. NumPy fallback using direct summation U(T) = Σ g_i exp(-E_i/kT)\\n4. Caching for performance","acceptance_criteria":"- [ ] Polynomial evaluator passes validation against NIST tables\\n- [ ] JAX version works in manifold generator\\n- [ ] NumPy version works in forward model\\n- [ ] Cached for repeated temperature queries","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T14:29:03.307939-06:00","updated_at":"2025-12-06T14:56:50.017836-06:00","closed_at":"2025-12-06T14:56:50.017836-06:00","dependencies":[{"issue_id":"CF-LIBS-irv","depends_on_id":"CF-LIBS-i0q","type":"parent-child","created_at":"2025-12-06T14:31:20.777276-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-irv","depends_on_id":"CF-LIBS-j1v","type":"blocks","created_at":"2025-12-06T14:35:55.905938-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-j1v","title":"Upgrade database schema for CF-LIBS physics","description":"Add columns and tables required for proper CF-LIBS calculations. Current schema lacks Stark parameters and partition function coefficients.","design":"1. Add to lines table: stark_w (width at ref density), stark_alpha (scaling exponent), stark_shift, is_resonance (boolean for ground-state lines)\\n2. Create partition_functions table with polynomial coefficients (Irwin/NIST format)\\n3. Migration script for existing databases","acceptance_criteria":"- [ ] stark_w, stark_alpha, stark_shift columns exist in lines\\n- [ ] is_resonance flag for identifying ground-state transitions\\n- [ ] partition_functions table with polynomial coefficients\\n- [ ] Migration preserves existing data","notes":"COMPLETED by Gemini CLI.\n\nChanges made:\n1. Updated Transition dataclass: Added stark_w, stark_alpha, stark_shift, is_resonance fields\n2. Updated SpeciesPhysics dataclass: Added atomic_mass\n3. New PartitionFunction dataclass for polynomial coefficients\n4. AtomicDatabase: Auto-migration logic, new methods get_atomic_mass(), get_partition_coefficients()\n5. Fixed pickle errors in caching\n6. datagen_v2.py: New schema, atomic mass dict, resonance detection\n\nStark/partition data currently NULL - needs literature values.\nAll tests pass.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T14:29:01.817137-06:00","updated_at":"2025-12-06T14:48:26.880478-06:00","closed_at":"2025-12-06T14:48:26.880484-06:00","dependencies":[{"issue_id":"CF-LIBS-j1v","depends_on_id":"CF-LIBS-i0q","type":"parent-child","created_at":"2025-12-06T14:31:20.736028-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-jjh","title":"Phase 2c Validation Testing","notes":"Parent epic for Phase 2c validation of quality metrics, self-absorption, and line selection modules. Research completed in .prompts/001-phase2c-validation-research/. Designed for parallel subagent execution.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T22:28:55.154926-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:38.55902-06:00","closed_at":"2026-01-08T23:08:38.55902-06:00","close_reason":"Phase 2c validation testing complete - 95 tests, 88% average coverage"}
{"id":"CF-LIBS-k6h","title":"Implement Stark broadening","description":"Stark broadening is the PRIMARY diagnostic for electron density in LIBS. Without it, ne determination is impossible. Current code has no Stark implementation.","design":"1. Stark width scaling law: w(n_e, T) = w_ref * (n_e/10^16) * (T/T_ref)^(-0.5)\\n2. Database lookup for w_ref, alpha parameters\\n3. Fallback approximation for lines missing Stark data (derive from upper energy level)\\n4. Optional Stark shift for asymmetric profiles","acceptance_criteria":"- [ ] Stark width calculation matches literature values\\n- [ ] Fallback approximation works for missing data\\n- [ ] Integrated with line profile calculations\\n- [ ] Can determine ne from measured line widths","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-06T14:29:07.375868-06:00","updated_at":"2025-12-06T15:07:32.223053-06:00","closed_at":"2025-12-06T15:07:32.223053-06:00","dependencies":[{"issue_id":"CF-LIBS-k6h","depends_on_id":"CF-LIBS-i0q","type":"parent-child","created_at":"2025-12-06T14:31:20.857961-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-k6h","depends_on_id":"CF-LIBS-1mb","type":"blocks","created_at":"2025-12-06T14:31:33.714952-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-k6h","depends_on_id":"CF-LIBS-j1v","type":"blocks","created_at":"2025-12-06T14:35:55.945329-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-k7g","title":"Implement uncertainty reporting and visualization","description":"Generate credible intervals (T±σ, n_e±σ, C±σ), parameter correlation analysis, and publication-ready uncertainty tables.","notes":"Iteration 1: Added correlation_matrix() and correlation_table() methods to MCMCResult for parameter correlation analysis. Added plot_corner() and plot_forest() methods to MCMCSampler using ArviZ. Added 4 tests - all 29 bayesian tests pass.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T07:33:50.509322-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:27:14.002085-06:00","closed_at":"2026-01-09T11:27:14.002085-06:00","close_reason":"Uncertainty reporting complete: credible intervals (q025/q975), correlation_matrix(), correlation_table(), plot_corner(), plot_forest(). 29 tests pass.","dependencies":[{"issue_id":"CF-LIBS-k7g","depends_on_id":"CF-LIBS-0oq","type":"blocks","created_at":"2026-01-09T07:34:08.543757-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-k7g","depends_on_id":"CF-LIBS-452","type":"blocks","created_at":"2026-01-09T10:05:28.222635-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-kwr","title":"Implement HDF5/Zarr storage backend","description":"Enable out-of-core processing for massive datasets (hyperspectral cubes). Replace in-memory list storage.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T08:24:37.011979-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:37:05.970494-06:00","closed_at":"2026-01-09T11:37:05.970494-06:00","close_reason":"HDF5/Zarr storage implemented in manifold module (generator.py, loader.py, config.py). Manifolds stored as HDF5 with physics versioning and metadata."}
{"id":"CF-LIBS-kxn","title":"Refactor core to Functional Patterns","description":"Decouple state from compute. Move away from monolithic classes to pure functions + dataclasses.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T08:24:42.125585-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:37:10.786203-06:00","closed_at":"2026-01-09T11:37:10.786203-06:00","close_reason":"Functional patterns adopted: 38 @dataclass/@jit occurrences across 17 files. Pure functions with dataclass state containers throughout inversion, radiation, plasma, and manifold modules."}
{"id":"CF-LIBS-n0a","title":"Implement self-absorption correction","description":"CF-LIBS is notorious for self-absorption errors in optically thick plasmas. Strong lines (especially resonance lines) can be optically thick, causing intensity underestimation.","design":"Primary method: Recursive correction\\n1. Calculate optical depth τ0 using current n_s, T\\n2. Correction factor f = (1 - exp(-τ)) / τ\\n3. I_corrected = I_measured / f\\n4. Iterate with main solver\\n\\nFallback: Simply mask lines with τ0 \u003e threshold","acceptance_criteria":"- [ ] Recursive correction converges\\n- [ ] Reduces systematic concentration errors\\n- [ ] Can mask heavily absorbed lines\\n- [ ] Optical depth estimates reasonable","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T14:29:52.686516-06:00","updated_at":"2026-01-08T23:39:26.053599-06:00","closed_at":"2026-01-08T23:39:26.053599-06:00","close_reason":"Code implemented and validated with 95 passing tests (88% average coverage)","dependencies":[{"issue_id":"CF-LIBS-n0a","depends_on_id":"CF-LIBS-59b","type":"parent-child","created_at":"2025-12-06T14:31:22.143792-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-n95","title":"Implement SAM Outlier Detection","description":"Spectral Angle Mapper for identifying and removing anomalous spectra.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-07T08:24:52.298989-06:00","created_by":"briansquires","updated_at":"2026-01-10T00:37:02.690481-06:00","closed_at":"2026-01-10T00:37:02.690481-06:00","close_reason":"Implemented SAM (Spectral Angle Mapper) outlier detection with 35 passing tests"}
{"id":"CF-LIBS-nfo","title":"Implement nested sampling for model comparison","description":"Use dynesty or jaxns for evidence calculation and model selection (single-T vs multi-T plasma models).","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-09T07:33:47.911943-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:54:03.197953-06:00","closed_at":"2026-01-09T11:54:03.197953-06:00","close_reason":"Implemented NestedSampler with dynesty. Evidence calculation, Bayes factor comparison, stick-breaking prior transform for concentrations. 8 tests pass.","dependencies":[{"issue_id":"CF-LIBS-nfo","depends_on_id":"CF-LIBS-cxp","type":"blocks","created_at":"2026-01-09T07:34:08.417906-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-o7b","title":"Implement hybrid inversion strategy","description":"Combine manifold lookup (fast, global) with gradient descent (precise, local). This is the industry standard for speed + precision.","design":"Step 1: Coarse Search - manifold nearest neighbor (cosine similarity) -\u003e initial guess T0, ne0\\nStep 2: Fine Tune - JAX autodiff + BFGS/L-M optimizer starting from coarse guess\\nBenefit: Avoids local minima while achieving high precision","acceptance_criteria":"- [ ] Coarse search finds reasonable starting point\\n- [ ] Gradient descent converges from coarse guess\\n- [ ] Faster than pure optimization\\n- [ ] More robust than pure manifold lookup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-06T14:30:19.563174-06:00","updated_at":"2026-01-09T07:59:26.428125-06:00","closed_at":"2026-01-09T07:59:26.428125-06:00","close_reason":"Implemented HybridInverter (manifold coarse search + JAX L-BFGS optimization), SpectralFitter, 14 tests passing.","dependencies":[{"issue_id":"CF-LIBS-o7b","depends_on_id":"CF-LIBS-cxm","type":"parent-child","created_at":"2025-12-06T14:31:23.226969-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-o7b","depends_on_id":"CF-LIBS-4wl","type":"blocks","created_at":"2026-01-09T05:38:00.043753-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-p55","title":"Phase 4: Production \u0026 Ecosystem","description":"Production deployment and ecosystem support for CF-LIBS.\n\n## Scope\n- Implementation backlog (P1/P2 ready-to-work tasks)\n- Research roadmap (P3/P4 future exploration)\n- Jupyter-friendly visualization\n- Export tools for common formats\n- Hardware driver integration\n- Example notebooks\n- Performance optimization\n\n## Success Criteria\n- All P1/P2 implementation tasks complete\n- Documentation and examples published\n- Integration with common LIBS workflows\n\nReference: ROADMAP.md Phase 4","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T14:36:33.027206-06:00","created_by":"briansquires","updated_at":"2026-01-09T14:36:33.027206-06:00","dependencies":[{"issue_id":"CF-LIBS-p55","depends_on_id":"CF-LIBS-ak3","type":"blocks","created_at":"2026-01-09T14:37:08.528668-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-p55","depends_on_id":"CF-LIBS-8rh","type":"blocks","created_at":"2026-01-09T14:37:08.575683-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-q30","title":"High-Performance Core Architecture","description":"Refactor core engine for JAX-based acceleration, out-of-core storage, and functional patterns.","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-07T08:23:39.98852-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:37:42.85534-06:00","closed_at":"2026-01-09T11:37:42.85534-06:00","close_reason":"All dependencies complete: JAX migration (CF-LIBS-c39), HDF5/Zarr storage (CF-LIBS-kwr), Functional patterns (CF-LIBS-kxn). Core architecture refactored with JAX acceleration, HDF5 manifolds, and dataclass/pure-function patterns.","dependencies":[{"issue_id":"CF-LIBS-q30","depends_on_id":"CF-LIBS-kxn","type":"blocks","created_at":"2026-01-07T08:27:16.412765-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-q30","depends_on_id":"CF-LIBS-kwr","type":"blocks","created_at":"2026-01-07T08:27:41.036416-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-q30","depends_on_id":"CF-LIBS-c39","type":"blocks","created_at":"2026-01-07T08:27:46.103229-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-qoo","title":"[Plan] Consolidate and validate test plan","notes":"Consolidate outputs from parallel planning subagents. Verify consistency, resolve conflicts, finalize phase2c-validation-plan.md. Update SUMMARY.md. This task MUST wait for all planning tasks to complete.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:29:57.471436-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:01:46.10722-06:00","closed_at":"2026-01-08T23:01:46.10722-06:00","close_reason":"Consolidated plan with 102 tests across 4 phases in phase2c-validation-plan.md","dependencies":[{"issue_id":"CF-LIBS-qoo","depends_on_id":"CF-LIBS-60j","type":"blocks","created_at":"2026-01-08T22:31:05.350327-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-qoo","depends_on_id":"CF-LIBS-cjj","type":"blocks","created_at":"2026-01-08T22:31:05.39155-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-qoo","depends_on_id":"CF-LIBS-czy","type":"blocks","created_at":"2026-01-08T22:31:05.434771-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-qoo","depends_on_id":"CF-LIBS-74r","type":"blocks","created_at":"2026-01-08T22:31:05.476491-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-qoo","depends_on_id":"CF-LIBS-tqq","type":"parent-child","created_at":"2026-01-08T22:31:48.879553-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-r89","title":"Implement PLS Regression","description":"Partial Least Squares regression for multivariate quantitative analysis.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-07T08:25:07.798614-06:00","created_by":"briansquires","updated_at":"2026-01-07T08:25:07.798614-06:00"}
{"id":"CF-LIBS-rtu","title":"[Impl] Implement test_quality.py","notes":"Use code-review subagent after implementation. Tests for QualityAssessor: threshold tests, metric calculations, flag determination, edge cases. Can run in PARALLEL with other test file implementations after fixtures ready.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:30:19.875169-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:11.805611-06:00","closed_at":"2026-01-08T23:08:11.805611-06:00","close_reason":"Implemented 95 passing tests across quality, self_absorption, and line_selection","labels":["parallel","subagent:code-review"],"dependencies":[{"issue_id":"CF-LIBS-rtu","depends_on_id":"CF-LIBS-86n","type":"blocks","created_at":"2026-01-08T22:31:15.023034-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-rtu","depends_on_id":"CF-LIBS-xmb","type":"parent-child","created_at":"2026-01-08T22:31:49.870719-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-s2o","title":"Implement JAX Peak Fitting Engine","description":"Gradient-based peak fitting using Optax/JAX instead of loop-heavy scipy.optimize.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-07T08:25:18.014091-06:00","created_by":"briansquires","updated_at":"2026-01-09T11:38:20.344176-06:00","closed_at":"2026-01-09T11:38:20.344176-06:00","close_reason":"Implemented as SpectralFitter in cflibs/inversion/hybrid.py. Uses JAX autodiff with jax.scipy.optimize.minimize (L-BFGS) for gradient-based spectral fitting. Replaces scipy.optimize with pure JAX."}
{"id":"CF-LIBS-tqq","title":"Phase 2c Validation Planning","notes":"Sub-epic for creating detailed test implementation plan. Execute 002-phase2c-validation-plan.md prompt. Outputs: phase2c-validation-plan.md with test specifications per module.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T22:29:10.688408-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:32.004651-06:00","closed_at":"2026-01-08T23:08:32.004651-06:00","close_reason":"All Phase 2c planning and implementation tasks completed","dependencies":[{"issue_id":"CF-LIBS-tqq","depends_on_id":"CF-LIBS-jjh","type":"parent-child","created_at":"2026-01-08T22:31:47.756726-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-usv","title":"Implement automatic line selection","description":"CF-LIBS accuracy depends critically on choosing good lines. Manual selection is error-prone and not scalable. Need automatic selection with quality scoring.","design":"LineSelector class:\\n1. Score metric: S = SNR × (1/unc_atomic) × IsolationFactor\\n2. Rules:\\n   - Exclude resonance lines by default (high self-absorption)\\n   - Require min energy spread ΔE_k \u003e 2 eV for reliable slope\\n   - Minimum SNR threshold (configurable)\\n   - Spectral isolation check (no blends)","acceptance_criteria":"- [ ] Score correctly ranks line quality\\n- [ ] Resonance line exclusion works\\n- [ ] Energy spread requirement enforced\\n- [ ] Selected lines produce better Boltzmann fit R^2","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T14:29:53.776268-06:00","updated_at":"2026-01-08T23:39:26.051675-06:00","closed_at":"2026-01-08T23:39:26.051675-06:00","close_reason":"Code implemented and validated with 95 passing tests (88% average coverage)","dependencies":[{"issue_id":"CF-LIBS-usv","depends_on_id":"CF-LIBS-59b","type":"parent-child","created_at":"2025-12-06T14:31:22.181833-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-xk7","title":"[Impl] Implement test_self_absorption.py","notes":"Use code-review subagent after implementation. Tests for SelfAbsorptionCorrector: correction round-trip, optical depth estimation, masking behavior. Can run in PARALLEL with other test file implementations after fixtures ready.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-08T22:30:20.884299-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:11.808393-06:00","closed_at":"2026-01-08T23:08:11.808393-06:00","close_reason":"Implemented 95 passing tests across quality, self_absorption, and line_selection","labels":["parallel","subagent:code-review"],"dependencies":[{"issue_id":"CF-LIBS-xk7","depends_on_id":"CF-LIBS-86n","type":"blocks","created_at":"2026-01-08T22:31:15.070321-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-xk7","depends_on_id":"CF-LIBS-xmb","type":"parent-child","created_at":"2026-01-08T22:31:49.883211-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-xmb","title":"Phase 2c Validation Implementation","notes":"Sub-epic for implementing validation tests. Execute 003-phase2c-validation-implement.md prompt. Outputs: test_quality.py, test_self_absorption.py, test_line_selection.py. Blocked by planning sub-epic.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-08T22:29:12.157589-06:00","created_by":"briansquires","updated_at":"2026-01-08T23:08:32.007029-06:00","closed_at":"2026-01-08T23:08:32.007029-06:00","close_reason":"All Phase 2c planning and implementation tasks completed","dependencies":[{"issue_id":"CF-LIBS-xmb","depends_on_id":"CF-LIBS-tqq","type":"blocks","created_at":"2026-01-08T22:31:06.41947-06:00","created_by":"briansquires"},{"issue_id":"CF-LIBS-xmb","depends_on_id":"CF-LIBS-jjh","type":"parent-child","created_at":"2026-01-08T22:31:47.804046-06:00","created_by":"briansquires"}]}
{"id":"CF-LIBS-y7o","title":"CF-LIBS Phase 2: Production-Grade Calibration-Free LIBS Engine","description":"Complete implementation of standard calibration-free LIBS workflow. Current state: forward modeling works but uses incorrect physics (constant partition functions, no Stark broadening, Gaussian-only profiles). Target: rigorous CF-LIBS with iterative Saha-Boltzmann solver, closure equation, self-absorption correction.","design":"Strategy: Physics First, Then Inversion. Fix underlying physics before building inversion. References: Ciucci et al., Tognoni et al.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-06T14:28:31.035949-06:00","updated_at":"2026-01-09T11:36:56.078899-06:00","closed_at":"2026-01-09T11:36:56.078899-06:00","close_reason":"Phase 2 complete: All sub-phases closed (2a Physics, 2b Classic CF-LIBS, 2c Quality Metrics, 2d Advanced Forward Fitting). 95+ tests passing.","dependencies":[{"issue_id":"CF-LIBS-y7o","depends_on_id":"CF-LIBS-i0q","type":"parent-child","created_at":"2025-12-06T14:31:05.207112-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-y7o","depends_on_id":"CF-LIBS-59b","type":"parent-child","created_at":"2025-12-06T14:31:05.248916-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-y7o","depends_on_id":"CF-LIBS-4xu","type":"parent-child","created_at":"2025-12-06T14:31:05.289722-06:00","created_by":"daemon","metadata":"{}"},{"issue_id":"CF-LIBS-y7o","depends_on_id":"CF-LIBS-cxm","type":"parent-child","created_at":"2025-12-06T14:31:05.3301-06:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CF-LIBS-zau","title":"Implement closure equation with multiple modes","description":"The closure equation ΣC=1 is what makes calibration-free analysis possible. It eliminates the unknown experimental factor F. Must handle invisible elements (O, N, C).","design":"Modes:\\n1. Standard: ΣC_measured = 1.0\\n2. Matrix mode: ΣC_measured + C_matrix = 1.0 (user specifies balance element)\\n3. Stoichiometric oxide mode: cations map to oxides (e.g., Al-\u003eAl2O3), closure on oxides","acceptance_criteria":"- [ ] Standard mode works for simple alloys\\n- [ ] Matrix mode handles Fe-dominated samples\\n- [ ] Oxide mode works for geological samples\\n- [ ] Warning when measured elements \u003c 50% of total","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-06T14:29:32.915962-06:00","updated_at":"2025-12-06T15:16:14.363381-06:00","closed_at":"2025-12-06T15:16:14.363381-06:00"}
{"id":"CF-LIBS-zbs","title":"Define physically motivated priors","description":"Implement priors for plasma parameters: T (0.5-3 eV), n_e (10^15-10^19 cm^-3), simplex prior for concentrations.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T07:33:44.807782-06:00","created_by":"briansquires","updated_at":"2026-01-09T08:32:12.009318-06:00","closed_at":"2026-01-09T08:32:12.009318-06:00","close_reason":"Implemented PriorConfig, create_temperature_prior, create_density_prior, create_concentration_prior functions. Priors: T(0.5-3 eV uniform), log_ne(15-19 uniform/Jeffreys), concentrations(Dirichlet)."}
